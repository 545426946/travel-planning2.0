<view class="container">
  <!-- é¦–é¡µ -->
  <scroll-view wx:if="{{currentTab === 0}}" class="scroll-area" scroll-y>
    <view class="header-section">
      <view class="top-bar">
        <text class="logo">è½»æ¾æ—…è¡Œè§„åˆ’</text>
        <view class="user-info" wx:if="{{userInfo}}" bindtap="showUserOptions">
          <image class="user-avatar" src="{{userInfo.avatar}}" mode="aspectFill" binderror="onImageError"></image>
          <text class="username">{{userInfo.name}}</text>
        </view>
        <view class="user-info" wx:else>
          <button class="login-btn-header" bindtap="goToLogin">ç™»å½•</button>
        </view>
      </view>
      <view class="hero-section">
        <text class="hero-title">å¸®æ‚¨è½»æ¾è¿›è¡Œå®Œç¾æ—…è¡Œè§„åˆ’</text>
        <text class="hero-subtitle">ä¸€é”®æ¢ç´¢ï¼Œå¼€å¯ä½ çš„æ—…ç¨‹</text>
        <view class="button-group">
          <button class="explore-btn" bindtap="exploreDestinations">ç«‹å³æ¢ç´¢</button>
          <button class="ai-btn" bindtap="showAIHelper">AIåŠ©æ‰‹</button>
        </view>
      </view>
    </view>
    
    <!-- è¶³è¿¹å…¥å£å¡ç‰‡ -->
    <view class="footprint-entry" bindtap="goToFootprint">
      <view class="footprint-bg">
        <view class="footprint-content">
          <view class="footprint-left">
            <text class="footprint-icon">ğŸ—ºï¸</text>
            <view class="footprint-text">
              <text class="footprint-title">æˆ‘çš„è¶³è¿¹</text>
              <text class="footprint-desc">è®°å½•æ—…è¡Œè½¨è¿¹ï¼Œç‚¹äº®å»è¿‡çš„åŸå¸‚</text>
            </view>
          </view>
          <view class="footprint-arrow">â€º</view>
        </view>
        <view class="footprint-stats">
          <view class="fs-item">
            <text class="fs-num">{{footprintStats.provinces || 0}}</text>
            <text class="fs-label">çœä»½</text>
          </view>
          <view class="fs-item">
            <text class="fs-num">{{footprintStats.cities || 0}}</text>
            <text class="fs-label">åŸå¸‚</text>
          </view>
          <view class="fs-item">
            <text class="fs-num">{{footprintStats.attractions || 0}}</text>
            <text class="fs-label">è¶³è¿¹</text>
          </view>
        </view>
      </view>
    </view>
    
    <view class="banner-section">
      <swiper class="banner-swiper" indicator-dots autoplay interval="5000" duration="1000">
        <swiper-item wx:for="{{banners}}" wx:key="index">
          <image src="{{item.image}}" mode="aspectFill" class="banner-image" />
        </swiper-item>
      </swiper>
    </view>
    
    <view class="recommend-section">
      <view class="section-title">AI æ¨èè·¯çº¿</view>
      <scroll-view class="horizontal-scroll" scroll-x>
        <view class="route-card-container">
          <view wx:for="{{aiRoutes}}" wx:key="index" class="route-card">
            <image src="{{item.image}}" mode="aspectFill" class="route-image" />
            <view class="route-info">
              <text class="route-name">{{item.name}}</text>
              <text class="route-desc">{{item.desc}}</text>
            </view>
          </view>
        </view>
      </scroll-view>
    </view>
    
    <view class="destination-section">
      <view class="section-title">ç²¾é€‰ç›®çš„åœ°</view>
      <view class="destination-grid">
        <view wx:for="{{destinations}}" wx:key="index" class="destination-card">
          <image src="{{item.image}}" mode="aspectFill" class="dest-image" />
          <text class="dest-name">{{item.name}}</text>
        </view>
      </view>
    </view>
  </scroll-view>
  
  <!-- è¡Œç¨‹è§„åˆ’é¡µ -->
  <scroll-view wx:if="{{currentTab === 1}}" class="scroll-area" scroll-y>
    <view class="planner-header">
      <text class="page-title">è¡Œç¨‹è§„åˆ’</text>
      <view class="button-row">
        <button class="add-btn ai-plan-btn" bindtap="aiPlanItinerary">
          <icon type="success" size="18" color="#fff"></icon>
          AIè§„åˆ’
        </button>
        <button class="add-btn" bindtap="addNewPlan">
          <icon type="add" size="18" color="#fff"></icon>
          æ–°å»ºè¡Œç¨‹
        </button>
      </view>
    </view>
    <view class="plan-list">
      <view wx:for="{{travelPlans}}" wx:key="index" class="plan-item">
        <view class="plan-date">{{item.date}}</view>
        <view class="plan-details">
          <view class="location-row">
            <icon type="location" size="16" color="#FF6B6B"></icon>
            <text>{{item.from}} â†’ {{item.to}}</text>
          </view>
          <text class="plan-time">{{item.time}}</text>
        </view>
        <icon type="arrowright" size="16" color="#ccc"></icon>
      </view>
    </view>
  </scroll-view>
  
  <!-- çƒ­é—¨æ™¯ç‚¹é¡µ -->
  <scroll-view wx:if="{{currentTab === 2}}" class="scroll-area" scroll-y>
    <view class="hotspots-header">
      <text class="page-title">çƒ­é—¨æ™¯ç‚¹</text>
    </view>
    <view class="hotspot-list">
      <view wx:for="{{hotSpots}}" wx:key="index" class="hotspot-card">
        <image src="{{item.image}}" mode="aspectFill" class="spot-image" />
        <view class="spot-info">
          <text class="spot-name">{{item.name}}</text>
          <view class="rating-section">
            <icon wx:for="{{5}}" wx:key="index" wx:for-item="i" type="success" size="14" color="{{i <= item.rating ? '#FFD700' : '#E0E0E0'}}"></icon>
            <text class="rating-text">{{item.rating}}åˆ†</text>
          </view>
          <text class="spot-desc">{{item.description}}</text>
        </view>
      </view>
    </view>
  </scroll-view>
  
  <!-- ä¸ªäººä¸»é¡µ -->
  <scroll-view wx:if="{{currentTab === 3}}" class="scroll-area" scroll-y>
    <view class="profile-header" wx:if="{{userInfo}}">
      <image src="{{userInfo.avatar}}" mode="aspectFill" class="avatar" bindtap="showUserOptions" />
      <text class="username">{{userInfo.name}}</text>
      <view class="stats-row">
        <view class="stat-item">
          <text class="stat-number">{{stats.visitedPlaces || 0}}</text>
          <text class="stat-label">å»è¿‡çš„åœ°æ–¹</text>
        </view>
        <view class="stat-item">
          <text class="stat-number">{{stats.favoriteRoutes || 0}}</text>
          <text class="stat-label">æ”¶è—è·¯çº¿</text>
        </view>
      </view>
    </view>
    <view class="profile-header" wx:else>
      <image src="https://picsum.photos/seed/default-profile/400/400.jpg" mode="aspectFill" class="avatar" />
      <text class="username">æœªç™»å½•</text>
      <view class="login-prompt">
        <text>è¯·å…ˆç™»å½•æŸ¥çœ‹ä¸ªäººä¿¡æ¯</text>
        <button class="login-btn-profile" bindtap="goToLogin">ç«‹å³ç™»å½•</button>
      </view>
    </view>
    
    <view class="my-plans-section">
      <view class="section-title">æˆ‘çš„è¡Œç¨‹</view>
      <view class="my-plan-list">
        <view wx:for="{{myTravelPlans}}" wx:key="index" class="my-plan-item">
          <image src="{{item.image}}" mode="aspectFill" class="plan-thumb" />
          <view class="plan-summary">
            <text class="plan-title">{{item.title}}</text>
            <text class="plan-duration">{{item.duration}}</text>
          </view>
        </view>
      </view>
    </view>
    
    <view class="settings-section">
      <view class="setting-item" bindtap="showSettings">
        <icon type="settings" size="20" color="#333"></icon>
        <text>è®¾ç½®</text>
      </view>
      <view class="setting-item" bindtap="showUserProfile" wx:if="{{userInfo}}">
        <icon type="person" size="20" color="#333"></icon>
        <text>ä¸ªäººèµ„æ–™</text>
      </view>
      <view class="setting-item">
        <icon type="help" size="20" color="#333"></icon>
        <text>å¸®åŠ©ä¸åé¦ˆ</text>
      </view>
      <view class="setting-item logout-item" bindtap="logout" wx:if="{{userInfo}}">
        <icon type="close" size="20" color="#FF6B6B"></icon>
        <text style="color: #FF6B6B;">é€€å‡ºç™»å½•</text>
      </view>
    </view>
  </scroll-view>
  
  <!-- åº•éƒ¨å¯¼èˆªæ  -->
  <view class="tab-bar">
    <view wx:for="{{tabs}}" wx:key="index" class="tab-item" bindtap="switchTab" data-index="{{index}}">
      <icon type="{{currentTab === index ? item.activeIcon : item.icon}}" size="24" color="{{currentTab === index ? '#4A90E2' : '#999'}}"></icon>
      <text class="{{currentTab === index ? 'active' : ''}}">{{item.text}}</text>
    </view>
  </view>
</view>