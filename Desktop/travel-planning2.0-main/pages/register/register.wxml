<!-- pages/register/register.wxml -->
<view class="container">
  <!-- 顶部装饰 -->
  <view class="header-decoration">
    <view class="decoration-circle circle-1"></view>
    <view class="decoration-circle circle-2"></view>
  </view>

  <!-- 主要内容区域 -->
  <view class="main-content">
    <!-- Logo 和标题 -->
    <view class="logo-section">
      <image class="logo" src="/pages/image/logo.png" mode="aspectFit" binderror="onImageError"></image>
      <text class="app-name">注册账号</text>
      <text class="app-slogan">加入我们，开启精彩旅程</text>
    </view>

    <!-- 注册表单 -->
    <view class="register-form">
      <!-- 用户名 -->
      <view class="form-group">
        <view class="input-wrapper {{formErrors.username ? 'error' : ''}}">
          <text class="input-icon">👤</text>
          <input 
            class="form-input" 
            type="text" 
            placeholder="请输入用户名（3-20位）"
            value="{{formData.username}}"
            bindinput="onInput"
            data-field="username"
            maxlength="20"
          />
        </view>
        <text class="error-text" wx:if="{{formErrors.username}}">{{formErrors.username}}</text>
      </view>



      <!-- 密码 -->
      <view class="form-group">
        <view class="input-wrapper {{formErrors.password ? 'error' : ''}}">
          <text class="input-icon">🔒</text>
          <input 
            class="form-input" 
            type="{{showPassword ? 'text' : 'password'}}" 
            placeholder="请输入密码（至少6位）"
            value="{{formData.password}}"
            bindinput="onInput"
            data-field="password"
            maxlength="50"
          />
          <text class="password-toggle" bindtap="togglePassword">
            {{showPassword ? '👁️' : '👁️‍🗨️'}}
          </text>
        </view>
        <text class="error-text" wx:if="{{formErrors.password}}">{{formErrors.password}}</text>
      </view>

      <!-- 确认密码 -->
      <view class="form-group">
        <view class="input-wrapper {{formErrors.confirmPassword ? 'error' : ''}}">
          <text class="input-icon">🔐</text>
          <input 
            class="form-input" 
            type="{{showConfirmPassword ? 'text' : 'password'}}" 
            placeholder="请确认密码"
            value="{{formData.confirmPassword}}"
            bindinput="onInput"
            data-field="confirmPassword"
            maxlength="50"
          />
          <text class="password-toggle" bindtap="toggleConfirmPassword">
            {{showConfirmPassword ? '👁️' : '👁️‍🗨️'}}
          </text>
        </view>
        <text class="error-text" wx:if="{{formErrors.confirmPassword}}">{{formErrors.confirmPassword}}</text>
      </view>

      <!-- 协议同意 -->
      <view class="agreement-section">
        <view class="agreement-row" bindtap="toggleAgree">
          <view class="checkbox {{agreeTerms ? 'checked' : ''}}">
            <text wx:if="{{agreeTerms}}">✓</text>
          </view>
          <text class="agreement-text">我已阅读并同意</text>
        </view>
        <view class="agreement-links">
          <text class="link-text" bindtap="viewUserAgreement">《用户协议》</text>
          <text>和</text>
          <text class="link-text" bindtap="viewPrivacyPolicy">《隐私政策》</text>
        </view>
      </view>

      <!-- 注册按钮 -->
      <button 
        class="register-btn" 
        bindtap="register"
        loading="{{isLoading}}"
        disabled="{{isLoading || !agreeTerms}}"
      >
        {{isLoading ? '注册中' : '立即注册'}}
      </button>

      <!-- 登录链接 -->
      <view class="login-link">
        <text>已有账号？</text>
        <text class="login-text" bindtap="goToLogin">立即登录</text>
      </view>
    </view>

    <!-- 其他注册方式 -->
    <view class="other-register">
      <view class="divider">
        <text class="divider-line"></text>
        <text class="divider-text">其他注册方式</text>
        <text class="divider-line"></text>
      </view>
      
      <view class="other-register-options">
        <view class="other-register-item">
          <text class="other-register-icon">🟢</text>
          <text class="other-register-text">微信注册</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 底部装饰 -->
  <view class="footer-decoration">
    <text class="footer-text">© 2024 旅行规划 - 让旅行更美好</text>
  </view>
</view>