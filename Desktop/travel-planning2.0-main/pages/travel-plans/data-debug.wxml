<!-- æ•°æ®è°ƒè¯•é¡µé¢ -->
<view class="container">
  <view class="header">
    <text class="title">ğŸ” æ•°æ®è°ƒè¯•å·¥å…·</text>
    <text class="subtitle">æ’æŸ¥"æ•°æ®é—å¤±"é—®é¢˜</text>
  </view>

  <!-- ç”¨æˆ·ä¿¡æ¯ -->
  <view class="section">
    <view class="section-title">ğŸ” ç”¨æˆ·çŠ¶æ€</view>
    <view class="info-grid">
      <view class="info-item">
        <text class="label">ç™»å½•çŠ¶æ€:</text>
        <text class="value {{debugData.userChecked ? 'success' : 'error'}}">
          {{debugData.userChecked ? 'âœ… å·²ç™»å½•' : 'âŒ æœªç™»å½•'}}
        </text>
      </view>
      <view class="info-item">
        <text class="label">ç”¨æˆ·ID:</text>
        <text class="value">{{userId || 'æœªè·å–'}}</text>
      </view>
      <view class="info-item" wx:if="{{userInfo}}">
        <text class="label">ç”¨æˆ·å:</text>
        <text class="value">{{userInfo.username}}</text>
      </view>
    </view>
    <view class="actions" wx:if="{{userId}}">
      <button class="btn btn-small" bindtap="copyUserId">ğŸ“‹ å¤åˆ¶ç”¨æˆ·ID</button>
    </view>
  </view>

  <!-- æ•°æ®åº“çŠ¶æ€ -->
  <view class="section">
    <view class="section-title">ğŸ—„ï¸ æ•°æ®åº“çŠ¶æ€</view>
    <view class="info-grid">
      <view class="info-item">
        <text class="label">è¿æ¥çŠ¶æ€:</text>
        <text class="value {{debugData.dbConnected ? 'success' : 'error'}}">
          {{debugData.dbConnected ? 'âœ… æ­£å¸¸' : 'âŒ å¼‚å¸¸'}}
        </text>
      </view>
      <view class="info-item">
        <text class="label">è¡Œç¨‹æ•°é‡:</text>
        <text class="value">{{debugData.totalPlans}} æ¡</text>
      </view>
      <view class="info-item">
        <text class="label">æ•°æ®å­˜åœ¨:</text>
        <text class="value {{debugData.plansExist ? 'success' : 'error'}}">
          {{debugData.plansExist ? 'âœ… æœ‰æ•°æ®' : 'âŒ æ— æ•°æ®'}}
        </text>
      </view>
    </view>
  </view>

  <!-- è¡Œç¨‹è¯¦æƒ… -->
  <view class="section" wx:if="{{debugData.planDetails.length > 0}}">
    <view class="section-title">ğŸ“‹ è¡Œç¨‹è¯¦æƒ…</view>
    <view class="plan-list">
      <view class="plan-item" wx:for="{{debugData.planDetails}}" wx:key="id">
        <view class="plan-header">
          <text class="plan-title">{{item.title}}</text>
          <text class="plan-status">{{item.status}}</text>
        </view>
        <view class="plan-info">
          <text class="plan-dest">ğŸ“ {{item.destination}}</text>
          <text class="plan-date">ğŸ“… {{item.start_date}} - {{item.end_date}}</text>
          <text class="plan-budget">ğŸ’° Â¥{{item.total_budget}}</text>
        </view>
        <view class="plan-meta">
          <text class="plan-days">{{item.total_days}}å¤©</text>
          <text class="plan-travelers">{{item.travelers_count}}äºº</text>
          <text class="plan-ai" wx:if="{{item.is_ai_generated}}">ğŸ¤– AIç”Ÿæˆ</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="actions">
    <button class="btn btn-primary" bindtap="runFullDebug" loading="{{isLoading}}">
      {{isLoading ? 'æ£€æŸ¥ä¸­...' : 'ğŸ”„ é‡æ–°æ£€æŸ¥'}}
    </button>
    <button class="btn btn-success" bindtap="createTestData" wx:if="{{debugData.userChecked}}">
      ğŸ†• åˆ›å»ºæµ‹è¯•æ•°æ®
    </button>
    <button class="btn btn-warning" bindtap="cleanTestData" wx:if="{{debugData.plansExist}}">
      ğŸ—‘ï¸ æ¸…ç†æµ‹è¯•æ•°æ®
    </button>
    <button class="btn btn-cancel" bindtap="goBack">
      è¿”å›
    </button>
  </view>

  <!-- æ§åˆ¶å°è¯´æ˜ -->
  <view class="tips">
    <view class="tips-title">ğŸ’¡ è°ƒè¯•æç¤º</view>
    <view class="tips-content">
      1. æŸ¥çœ‹å¼€å‘è€…å·¥å…·æ§åˆ¶å°çš„è¯¦ç»†æ—¥å¿—
      2. å¦‚æœç”¨æˆ·IDä¸ºç©ºï¼Œè¯·é‡æ–°ç™»å½•
      3. å¦‚æœæ•°æ®åº“è¿æ¥å¼‚å¸¸ï¼Œæ£€æŸ¥åŸŸåç™½åå•é…ç½®
      4. å¦‚æœæ— æ•°æ®ï¼Œå¯ä»¥åˆ›å»ºæµ‹è¯•æ•°æ®è¿›è¡ŒéªŒè¯
      5. å¤åˆ¶ç”¨æˆ·IDå¯ä»¥åœ¨æ•°æ®åº“æ§åˆ¶å°æ‰‹åŠ¨æŸ¥è¯¢
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{isLoading}}" class="loading-overlay">
    <view class="loading-content">
      <text class="loading-text">æ­£åœ¨æ£€æŸ¥æ•°æ®...</text>
    </view>
  </view>
</view>