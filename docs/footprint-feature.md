# 足迹地图功能说明

## 功能概述

参考"圆周旅迹"App风格，实现了完整的旅行足迹记录功能，包括：

1. **足迹地图** - 展示所有打卡记录，点亮去过的省份
2. **打卡功能** - 记录旅行足迹，支持照片和备注
3. **旅行统计** - 统计去过的省份、城市、景点数量
4. **成就系统** - 解锁旅行成就徽章

## 页面结构

```
pages/
├── map/map          # 足迹地图主页
├── checkin/checkin  # 打卡页面
└── plan-map/plan-map # 行程地图（已集成打卡）
```

## 数据库表

需要在 Supabase 中执行 `database/footprint_tables.sql` 创建以下表：

- `footprints` - 足迹记录表
- `travel_stats` - 旅行统计表

## 使用的API

使用高德地图API（已配置）：
- Key: `26e18d3799a5a6bc8b2bf34e454777a5`
- 逆地理编码
- POI搜索
- 地理编码

## 入口位置

1. **首页** - 足迹入口卡片，显示统计数据
2. **行程地图** - 工具栏中的足迹按钮
3. **景点详情** - 打卡按钮

## 核心功能

### 1. 足迹地图 (pages/map/map)
- 地图展示所有足迹点
- 统计卡片显示省份/城市/足迹数
- 三个Tab：地图、足迹列表、成就
- 省份点亮效果
- 成就徽章系统

### 2. 打卡页面 (pages/checkin/checkin)
- 自动获取当前位置
- 逆地理编码获取地址
- 搜索附近景点
- 支持添加照片（最多9张）
- 支持添加备注
- 可从行程地图跳转并预填景点信息

### 3. 行程地图集成
- 景点详情弹窗增加"打卡"按钮
- 工具栏增加"足迹"入口

## 配置文件

- `config/map-config.js` - 高德地图配置
- `utils/footprint-service.js` - 足迹服务
- `utils/map-service.js` - 地图服务（已更新为高德API）

## 部署步骤

1. 在 Supabase SQL Editor 执行 `database/footprint_tables.sql`
2. 确保高德地图API Key有效
3. 编译运行小程序

## 后续优化建议

1. 添加足迹海报生成和分享功能
2. 添加足迹时间线视图
3. 添加更多成就徽章
4. 支持足迹编辑功能
5. 添加足迹搜索功能
